<div class="m-t-15">
    <div class="view-info">
        <div class="row">
            <div class="col-lg-12">
                <div class="general-info">
                    <div class="row">
                        <div class="col-lg-12 col-xl-12">
                            <div class="form-group row">
                                <div class="col-sm-12 col-xl-12" style="margin-top: 30px">
                                    <h4 *ngIf="schoolClass.timetable" class="sub-title"><span jhiTranslate="schoolClass.view.timetable-title"></span></h4>
                                    <h4 *ngIf="!schoolClass.timetable" class="sub-title"><span jhiTranslate="schoolClass.view.no-timetable-generated"></span></h4>
                                    <div *ngIf="schoolClass.timetable">
                                        <mwl-calendar-week-view
                                            precision="minutes"
                                            [headerTemplate]="headerTemplate"
                                            [viewDate]="viewDate"
                                            [events]="schoolClassesStaticTimeSlots"
                                            [eventTemplate]="eventTemplate"
                                            [hourSegments]="2"
                                            [dayStartHour]="+client.timeTableOptions.coursesStartTime.hour - 1"
                                            [dayStartMinute]="+client.timeTableOptions.coursesStartTime.minutes"
                                            [dayEndHour]="+client.timeTableOptions.coursesEndTime.hour + 1"
                                            [dayEndMinute]="+client.timeTableOptions.coursesEndTime.minutes"
                                            [weekStartsOn]="+client.timeTableOptions.firstWeekDay.position"
                                        >
                                        </mwl-calendar-week-view>
                                        <ng-template #modalContent let-close="close">
                                            <div class="modal-header">
                                                <h5 class="modal-title">Event action occurred</h5>
                                            </div>
                                        </ng-template>
                                        <ng-template #headerTemplate let-days="days" let-locale="locale"
                                                     let-dayClicked="dayClicked" let-eventDropped="eventDropped">
                                            <div class="cal-day-headers cursor-default">
                                                <div
                                                    class="cal-header"
                                                    *ngFor="let day of days"
                                                    [class.cal-past]="day.isPast"
                                                    [class.cal-future]="day.isFuture"
                                                    [class.cal-drag-over]="day.dragOver"
                                                    (mwlClick)="dayClicked.emit({date: day.date})"
                                                    mwlDroppable
                                                    (dragEnter)="day.dragOver = true"
                                                    (dragLeave)="day.dragOver = false"
                                                    (drop)="day.dragOver = false; eventDropped.emit({event: $event.dropData.event, newStart: day.date, fromHeader: true})">
                                                    <div class="top" [class.today]="day.isToday">
                                                        <div class="day-label text-uppercase">
                                                            <strong>{{ day.date | calendarDate:'weekViewColumnHeader':locale }}</strong>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>
                                        <ng-template
                                            #eventTemplate
                                            let-weekEvent="weekEvent"
                                            let-tooltipPlacement="tooltipPlacement"
                                            let-eventClicked="eventClicked"
                                            let-tooltipTemplate="tooltipTemplate"
                                            let-tooltipAppendToBody="tooltipAppendToBody"
                                            let-tooltipDisabled="tooltipDisabled"
                                            let-tooltipDelay="tooltipDelay"
                                            let-column="column"
                                        >
                                            <div
                                                class="cal-event"
                                                [ngStyle]="{backgroundColor: weekEvent.event.color?.secondary,
                                    borderColor: weekEvent.event.color?.primary
                                    }"
                                                [mwlCalendarTooltip]="!tooltipDisabled ? (weekEvent.event.title | calendarEventTitle: 'weekTooltip':weekEvent.event): ''"
                                                [tooltipPlacement]="tooltipPlacement"
                                                [tooltipEvent]="weekEvent.event"
                                                [tooltipTemplate]="tooltipTemplate"
                                                [tooltipAppendToBody]="tooltipAppendToBody"
                                                [tooltipDelay]="tooltipDelay"
                                                (mwlClick)="eventClicked.emit()"
                                            >
                                                <mwl-calendar-event-actions
                                                    [event]="weekEvent.event"
                                                >
                                                </mwl-calendar-event-actions>
                                                <mwl-calendar-event-title [customTemplate]="eventTitleTemplate"
                                                                          [event]="weekEvent.event"
                                                                          view="week"
                                                >
                                                </mwl-calendar-event-title>
                                            </div>
                                        </ng-template>
                                        <ng-template #eventTitleTemplate let-event="event">
                                            <div [style.color]="event['fontColor']">
                                                <strong> {{dateTimeHelper.twoDigitTimeFormat(event.timeSlot?.startTime.hour, event.timeSlot?.startTime.minutes)}} - {{dateTimeHelper.twoDigitTimeFormat(event.timeSlot?.endTime.hour, event.timeSlot?.endTime.minutes)}} </strong>
                                                <br />
                                                <span class="text-center">{{event.timeSlot.title}}</span>
                                                <br />
                                            </div>
                                        </ng-template>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
